<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fretboard Scale Visualizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Fretboard Scale Visualizer</h1>
            <p class="subtitle">Visualize scales and modes on any stringed instrument</p>
        </header>
        
        <!-- Settings Bar - Moved to top -->
        <div class="settings-bar">
            <button class="settings-toggle" id="settings-toggle">⚙️ Settings</button>
            <div class="settings-panel" id="settings-panel" style="display: none;">
                <h3>Settings</h3>
                <div class="settings-group">
                    <label>Visual Style:</label>
                    <div class="button-group">
                        <button class="version-btn" data-version="1">Classic</button>
                        <button class="version-btn" data-version="2">Colorful</button>
                        <button class="version-btn active" data-version="3">Minimal</button>
                        <button class="version-btn" data-version="4">Bold</button>
                        <button class="version-btn" data-version="5">Circular</button>
                    </div>
                </div>
                <div class="settings-group">
                    <label>Color Palette:</label>
                    <div class="button-group">
                        <button class="palette-btn active" data-palette="default">Default</button>
                        <button class="palette-btn" data-palette="warm">Warm</button>
                        <button class="palette-btn" data-palette="cool">Cool</button>
                        <button class="palette-btn" data-palette="vibrant">Vibrant</button>
                        <button class="palette-btn" data-palette="monochrome">Monochrome</button>
                    </div>
                </div>
                <div class="settings-group">
                    <label for="fret-count-input">Number of Frets:</label>
                    <input type="number" id="fret-count-input" min="5" max="30" value="20" class="settings-input">
                </div>
            </div>
        </div>
        
        <!-- Controls Section -->
        <div class="controls-section">
            <div class="control-group">
                <label for="instrument-select">Instrument:</label>
                <select id="instrument-select" class="control-select"></select>
            </div>
            
            <div class="control-group">
                <label for="key-select">Key:</label>
                <select id="key-select" class="control-select"></select>
            </div>
            
            <div class="control-group">
                <label for="scale-select">Scale/Mode:</label>
                <select id="scale-select" class="control-select"></select>
            </div>
        </div>
        
        <!-- Circle Visualizations -->
        <div class="circle-section">
            <div class="circle-controls">
                <button class="circle-toggle" id="toggle-circle-fifths">Show Circle of Fifths</button>
                <button class="circle-toggle" id="toggle-chromatic">Show Chromatic Circle</button>
            </div>
            <div class="circles-container">
                <div id="circle-of-fifths" class="circle-container" style="display: none;"></div>
                <div id="chromatic-circle" class="circle-container" style="display: none;"></div>
            </div>
        </div>
        
        <!-- Tuning Editor -->
        <div class="tuning-section">
            <button class="tuning-toggle" id="toggle-tuning-editor">Custom Tuning Editor</button>
            <div id="tuning-editor-container" style="display: none;"></div>
        </div>

        <!-- Feature Toggles Bar - Right above fretboard -->
        <div class="feature-toggles-bar">
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-scale" checked>
                <span>Scale</span>
            </label>
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-chords">
                <span>Chords</span>
            </label>
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-intervals">
                <span>Intervals</span>
            </label>
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-patterns">
                <span>Patterns</span>
            </label>
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-frequency">
                <span>Frequency</span>
            </label>
            <label class="toggle-label-horizontal">
                <input type="checkbox" id="toggle-triads">
                <span>Triads</span>
            </label>
        </div>

        <!-- Fretboard Container -->
        <div class="fretboard-container">
            <div id="fretboard" class="fretboard version-3">
                <div id="fretboard-loading" style="padding: 40px; text-align: center; color: #666;">
                    Loading fretboard...
                </div>
            </div>
            <!-- SVG overlay for triad connections -->
            <svg id="triad-connections" class="triad-connections-overlay"></svg>
        </div>
        
        <!-- Legend - Below fretboard -->
        <div id="legend-container" class="legend-container-bottom"></div>
        
        <!-- Bottom Controls Bar - Chord and Triad selectors -->
        <div class="bottom-controls-bar">
            <div class="control-item">
                <label for="chord-select" class="control-label">Chord:</label>
                <select id="chord-select" class="control-select-small">
                    <option value="">None</option>
                </select>
            </div>
            <div class="control-item" id="triad-controls" style="display: none;">
                <label for="triad-select" class="control-label">Triad:</label>
                <select id="triad-select" class="control-select-small">
                    <option value="">None</option>
                </select>
                <label for="triad-method-select" class="control-label">Method:</label>
                <select id="triad-method-select" class="control-select-small">
                    <option value="connected">Connected</option>
                    <option value="close-voicing">Close Voicing</option>
                    <option value="spread">Spread</option>
                    <option value="string-sets">String Sets</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Load modules in order -->
    <script src="debug-console.js"></script>
    <script src="scales.js"></script>
    <script src="instruments.js"></script>
    <script src="visualization.js"></script>
    <script src="circle-of-fifths.js"></script>
    <script src="chords.js"></script>
    <script src="intervals.js"></script>
    <script src="patterns.js"></script>
    <script src="frequency.js"></script>
    <script src="tuning-editor.js"></script>
    <script src="note-interactions.js"></script>
    <script src="triads.js"></script>
    <script src="legend.js"></script>
    <script src="script.js"></script>
</body>
</html>
